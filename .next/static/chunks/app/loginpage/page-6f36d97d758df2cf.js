(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{645:function(e,s,t){Promise.resolve().then(t.bind(t,71169))},52736:function(e,s,t){"use strict";t.r(s),t.d(s,{Context:function(){return u}});var a=t(57437),l=t(92173),r=t(24033),n=t(2265),i=t(68143),o=t.n(i),c=t(5925);let u=(0,n.createContext)();s.default=e=>{let{children:s}=e,[t,i]=(0,n.useState)(!1),[d,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(null),[h,w]=(0,n.useState)(!1),[b,y]=(0,n.useState)({}),[v,j]=(0,n.useState)({username:"",email:"",password:""}),[N,S]=(0,n.useState)({username:"",password:""}),_=(0,r.useRouter)(),C=async e=>{e.preventDefault(),m(!0);try{let e=await l.Z.post("/api/signup",v);m(!1),i(201!==e.data.status),x(e.data.message),"User Registered Successfully"===e.data.message&&(_.push("/loginpage"),c.default.success("User created successfully"),j({username:"",email:"",password:""}))}catch(e){console.error(e),m(!1),i(!0)}},D=async e=>{e.preventDefault(),m(!0);try{let e=await l.Z.post("/api/login",N);m(!1),i(201!==e.data.status),x(e.data.message),"User login successfully"===e.data.message&&(_.push("/"),c.default.success("User login successfully"),S({username:"",password:""}))}catch(e){console.error(e),m(!1),i(!0)}};(0,n.useEffect)(()=>{t&&setTimeout(()=>{i(!1),x("")},3500)},[t]),(0,n.useEffect)(()=>{let e;let s=async()=>{try{let e=await l.Z.get("/api/login-user");g(e.data)}catch(e){g(null),console.log(e)}};return(e=o()(s,1500))(),()=>{e.cancel()}},[N]);let P=async()=>{try{await l.Z.get("/api/logout"),g(null),_.push("/loginpage")}catch(e){console.log(e)}};return(0,a.jsx)(u.Provider,{value:{signup:v,setSignUp:j,handleSignUpSubmit:C,loading:d,error:t,message:p,login:N,setLogin:S,handleLoginSubmit:D,user:f,handleLogout:P,tracking:h,setTracking:w,TrackingData:b,setTrackingData:y},children:s})}},71169:function(e,s,t){"use strict";t.r(s);var a=t(57437),l=t(52736),r=t(59126),n=t(16691),i=t.n(n),o=t(61396),c=t.n(o),u=t(2265);s.default=()=>{let{loading:e,error:s,message:t,login:n,setLogin:o,handleLoginSubmit:d}=(0,u.useContext)(l.Context),m=e=>{o({...n,[e.target.name]:e.target.value})};return(0,a.jsx)("div",{children:(0,a.jsxs)("section",{className:"relative flex flex-wrap lg:h-screen lg:items-center",children:[(0,a.jsxs)("div",{className:"w-full px-4 py-12 sm:px-6 sm:py-16 lg:w-1/2 lg:px-8 lg:py-24",children:[(0,a.jsxs)("div",{className:"mx-auto max-w-lg text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Welcome to Shop \uD83D\uDED2"}),(0,a.jsx)("p",{className:"mt-4 text-gray-500",children:"Login to your account to continue shopping"})]}),s&&(0,a.jsxs)("div",{className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 ",role:"alert",children:[(0,a.jsx)("span",{className:"font-medium",children:"Danger alert!"})," ",t]}),(0,a.jsxs)("form",{onSubmit:d,className:"mx-auto mb-0 mt-8 max-w-md space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"text",className:"w-full rounded-lg border-gray-200 border p-4 pe-12 text-sm shadow-sm",placeholder:"test",required:!0,name:"username",value:n.username,onChange:m})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"password",className:"w-full rounded-lg border-gray-200 border p-4 pe-12 text-sm shadow-sm",placeholder:"Enter password",required:!0,name:"password",value:n.password,onChange:m})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["No account?",(0,a.jsx)(c(),{className:"underline mx-1",href:"/signupPage",children:"Sign up"})]}),(0,a.jsx)("button",{type:"submit",className:"inline-block rounded-lg bg-[#394149] px-10 md:px-20 py-3 text-sm font-medium text-white",children:e?(0,a.jsx)(r.Z,{}):"Login"})]})]})]}),(0,a.jsx)("div",{className:"relative h-64 w-full sm:h-96 lg:h-full lg:w-1/2",children:(0,a.jsx)(i(),{fill:"cover",alt:"Welcome",src:"https://images.unsplash.com/photo-1630450202872-e0829c9d6172?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80",className:"absolute inset-0 h-full w-full object-cover",height:100,width:100})})]})})}},59126:function(e,s,t){"use strict";var a=t(57437);s.Z=()=>(0,a.jsx)("div",{className:"inline-block h-7 w-7 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",role:"status",children:(0,a.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})},1295:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{default:function(){return c},unstable_getImgProps:function(){return o}});let a=t(21024),l=t(32301),r=t(27873),n=t(63222),i=a._(t(75033)),o=e=>{(0,r.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:s}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,t]of Object.entries(s))void 0===t&&delete s[e];return{props:s}},c=n.Image},16691:function(e,s,t){e.exports=t(1295)},61396:function(e,s,t){e.exports=t(46685)}},function(e){e.O(0,[580,222,314,685,873,971,596,744],function(){return e(e.s=645)}),_N_E=e.O()}]);