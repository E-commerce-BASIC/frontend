(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{85958:function(e,t,s){Promise.resolve().then(s.bind(s,38638))},52736:function(e,t,s){"use strict";s.r(t),s.d(t,{Context:function(){return d}});var a=s(57437),r=s(92173),n=s(24033),o=s(2265),l=s(68143),c=s.n(l),i=s(5925);let d=(0,o.createContext)();t.default=e=>{let{children:t}=e,[s,l]=(0,o.useState)(!1),[u,g]=(0,o.useState)(!1),[p,h]=(0,o.useState)(""),[m,x]=(0,o.useState)(null),[f,v]=(0,o.useState)(!1),[b,w]=(0,o.useState)({}),[y,j]=(0,o.useState)({username:"",email:"",password:""}),[N,C]=(0,o.useState)({username:"",password:""}),_=(0,n.useRouter)(),P=async e=>{e.preventDefault(),g(!0);try{let e=await r.Z.post("/api/signup",y);g(!1),l(201!==e.data.status),h(e.data.message),"User Registered Successfully"===e.data.message&&(_.push("/loginpage"),i.default.success("User created successfully"),j({username:"",email:"",password:""}))}catch(e){console.error(e),g(!1),l(!0)}},S=async e=>{e.preventDefault(),g(!0);try{let e=await r.Z.post("/api/login",N);g(!1),l(201!==e.data.status),h(e.data.message),"User login successfully"===e.data.message&&(_.push("/"),i.default.success("User login successfully"),C({username:"",password:""}))}catch(e){console.error(e),g(!1),l(!0)}};(0,o.useEffect)(()=>{s&&setTimeout(()=>{l(!1),h("")},3500)},[s]),(0,o.useEffect)(()=>{let e;let t=async()=>{try{let e=await r.Z.get("/api/login-user");x(e.data)}catch(e){x(null),console.log(e)}};return(e=c()(t,1500))(),()=>{e.cancel()}},[N]);let k=async()=>{try{await r.Z.get("/api/logout"),x(null),_.push("/loginpage")}catch(e){console.log(e)}};return(0,a.jsx)(d.Provider,{value:{signup:y,setSignUp:j,handleSignUpSubmit:P,loading:u,error:s,message:p,login:N,setLogin:C,handleLoginSubmit:S,user:m,handleLogout:k,tracking:f,setTracking:v,TrackingData:b,setTrackingData:w},children:t})}},38638:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(57437),r=s(2265),n=s(92173);function o(e){let{Color:t,order_id:s}=e,r=async()=>{try{let{data:e}=await n.Z.get("/api/invoice?order_id=".concat(s)),t=e.message.invoice.invoice,a="/invoices/".concat(t);a?window.open(a,"_blank"):console.error("No PDF URL found")}catch(e){console.error("Error fetching invoice:",e)}};return(0,a.jsx)("div",{children:(0,a.jsx)("button",{onClick:r,className:"".concat(t," hover:bg-red-600 text-white font-bold py-1 px-4 rounded"),children:"PDF"})})}s(6543);var l=s(24033),c=s(52736);function i(e){var t,s;let{Processing:i,Color:d,date:u,T_id:g,order_id:p,x:h,backgroundColorClass:m}=e,x=(0,l.usePathname)(),{tracking:f,setTracking:v,TrackingData:b,setTrackingData:w}=(0,r.useContext)(c.Context),y={Completed:"bg-green-500",Processing:"bg-yellow-300",Dispatched:"bg-gray-500",AddToCart:"bg-red-400",Refund:"bg-red-700",Placed:"bg-purple-600"};return(0,a.jsxs)("div",{onClick:()=>console.log(y[i]),className:"w-full flex justify-between text-gray-600 items-center mb-6  p-4 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-300 ease-in-out ".concat(y[i]),children:[(0,a.jsxs)("div",{className:"font-medium text-sm text-white",children:["#",null==h?void 0:null===(s=h.invoice)||void 0===s?void 0:null===(t=s.tracking)||void 0===t?void 0:t.tracking_no]}),(0,a.jsx)("div",{className:"text-sm text-white",children:u}),"/dashboard/Orders"!=x?(0,a.jsx)("span",{className:"text-white ".concat("Completed"==i&&"bg-green-500"||"Processing"==i&&"bg-yellow-300"||"Dispatched"==i&&"bg-gray-500"||"AddToCart"==i&&"bg-red-400"||"Placed"==i&&"bg-purple-600"," rounded-full px-3 py-1 text-xs font-semibold"),children:i}):(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("select",{onChange:async e=>{await n.Z.post("/api/Admin/order_status",{newStatus:e.target.value,order_id:p}),await window.location.reload()},value:i,id:"status",className:"block w-full bg-white border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[(0,a.jsx)("option",{value:"Processing",children:"Processing"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"}),(0,a.jsx)("option",{value:"Refund",children:"Refund"}),(0,a.jsx)("option",{value:"Dispatched",children:"Dispatched"}),(0,a.jsx)("option",{value:"AddToCart",children:"Add To Cart"}),(0,a.jsx)("option",{value:"Placed",children:"Placed"})]})}),(0,a.jsx)(o,{Color:"bg-black",order_id:p})]})}var d=s(62067),u=s.n(d);function g(){let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=async()=>{try{let e=await n.Z.get("/api/invoice/all_orders");t(e.data.message)}catch(e){console.error("Error fetching orders:",e)}};e()},[]),(0,a.jsx)("div",{className:"bg-gray-100 py-10",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full",children:[(0,a.jsx)("h1",{className:"text-center text-3xl font-bold mb-8 text-gray-800",children:"Order History"}),(0,a.jsxs)("div",{className:"w-full flex justify-between gap-6 text-gray-700 font-semibold text-base border-b-2 pb-4 mb-6",children:[(0,a.jsx)("div",{className:"col-span-1",children:"Order ID"}),(0,a.jsx)("div",{className:"col-span-2",children:"Order Date"}),(0,a.jsx)("div",{className:"col-span-1",children:"Status"}),(0,a.jsx)("div",{className:"col-span-2",children:"Action"})]}),e.map((e,t)=>(0,a.jsx)(i,{Processing:e.order_status,date:u()(e.createdAt).format("LLLL"),T_id:"#".concat(e.id),order_id:e.id,x:e},t))]})})})}}},function(e){e.O(0,[990,580,314,873,543,971,596,744],function(){return e(e.s=85958)}),_N_E=e.O()}]);